version: 0.2

phases:
  install:
    commands:
      - echo "Installing NGINX..."
      - yum update -y
      - yum install -y nginx
      - echo "NGINX installed successfully."

  build:
    commands:
      - echo "Build started on `date`"
      - mkdir -p /usr/share/nginx/html/assets
      - cp index.html /usr/share/nginx/html/index.html
      - cp -r assets/* /usr/share/nginx/html/assets/
      - echo "Static files copied to /usr/share/nginx/html/"
      - echo "Build completed on `date`"

  post_build:
    commands:
      - echo "Starting NGINX for verification..."
      - nginx -t  # test configuration syntax
      - service nginx start
      - echo "NGINX is running."
      - echo "Contents of /usr/share/nginx/html:"
      - ls -R /usr/share/nginx/html

artifacts:
  files:
    - '**/*'
  base-directory: /usr/share/nginx/html
